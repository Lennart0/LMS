@model IEnumerable<LMS.Models.Module>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @*Html.ActionLink("Create New", "Create")*@
</p>
@foreach ( var item in Model ) {
    <span><a href="#@item.Id" >@item.Name</a> </span>
}
<table class="table">
    <!--tr>
        <th>
            @*Html.DisplayNameFor(model => model.Description)*@
        </th>
        <th>
            @*Html.DisplayNameFor(model => model.Name)*@
        </th>
        <th>
            @*Html.DisplayNameFor(model => model.Start)*@
        </th>
        <th>
            @*Html.DisplayNameFor(model => model.End)*@
        </th>
        <th></th>
    </tr-->


    @foreach ( var item in Model ) {
        
        <tr>
            <td>
                <a id="@item.Id" />
                @Html.DisplayFor( modelItem => item.Name )
            </td>
            <!--td>
                @*Html.DisplayFor( modelItem => item.Description )*@
            </td-->
            <td>
                @Html.DisplayFor( modelItem => item.Start )
            </td>
            <td>
                @Html.DisplayFor( modelItem => item.End )
            </td>
            <td>
                @*Html.ActionLink("Edit", "Edit", new { id=item.Id }) |*@
                @Html.ActionLink( "Details", "Details", new { id = item.Id } )
                @*Html.ActionLink("Delete", "Delete", new { id=item.Id })*@
            </td>
        </tr>

        DateTime activityDate = new DateTime( 0 );
        foreach ( var activity in item.Activities ) {
            if( activity.Start.Date != activityDate.Date ) {
                activityDate = activity.Start;
                <tr><td>@Html.DisplayFor( x => activity.Start.Date )</td></tr>
            }
            <tr>
                <td>
                    @Html.DisplayFor( x => activity.Start.TimeOfDay )
                </td>
                <td>
                    @Html.DisplayFor( x => activity.End.TimeOfDay )
                </td>
                <td>
                    @Html.DisplayFor( x => activity.Name )
                </td>
            </tr>
            <tr>
                <td colspan="3">
                    @Html.DisplayFor( x => activity.Description )
                </td>
            </tr>
        }
    }

</table>
