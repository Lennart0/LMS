@model LMS.Models.FileModalPartialViewModel
@{ 
    var modalName = "myModalDialog";
    if (Model.InstanceId != null) {
        modalName += Model.InstanceId;
            }
}
<a data-toggle="modal" data-target="#@modalName" class ="link-text">

    @Html.Action("Status", "Document", new {
    EntityId = Model.Id,
    entityType = Model.Type})
</a>

<!-- Modal -->
<div class="modal fade" id="@modalName" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-admin" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">@Model.Title</h4>
            </div>
            <div class="modal-body DocumentManager">           
                <iframe    name="DocumentManager" class="modal-dialog modal-Iframe" id="DocumentManagerIframe" frameBorder="0" src="@Url.Content($"/Document/Add/?EntityId={Model.Id}&entityType={Model.Type}")">
                    Laddar...
                </iframe>
  
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" onclick="@Model.PostBackCancle" data-dismiss="modal">Close</button>
                @*function wrap so modaldocumentmanager can execute the callback method when it is good and ready*@
                <button type="button" class="btn btn-primary" onclick="ModalDocumentManager.Save(function(){@Model.PostBackChange})" data-dismiss="modal">Save changes</button>
            </div>
        </div>
    </div>
</div>
<script src="~/Scripts/ModalDocumentManager.js"></script>